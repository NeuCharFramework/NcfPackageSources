# WebView 快速开始指南

## 🚀 快速开始

### 首次运行

1. **启动应用**
   ```
   双击 NcfDesktopApp.GUI.exe
   ```

2. **自动安装 WebView2**（仅首次）
   - 应用会自动检测 WebView2 Runtime
   - 如未安装，会自动下载并安装
   - 显示安装进度
   - 安装完成后自动使用内置浏览器

3. **使用 NCF**
   - 点击"启动 NCF"按钮
   - 等待 NCF 应用启动
   - 内置浏览器会自动打开 NCF 界面

---

## 🎯 主要功能

### 1. 地址栏导航

**输入新 URL**：
1. 在地址栏输入 URL（例如：`localhost:3000`）
2. 按 **Enter** 键或点击 **→** 按钮
3. 自动导航到新页面

**自动补全协议**：
- 输入 `localhost:5000` → 自动转换为 `http://localhost:5000`
- 输入 `www.example.com` → 自动转换为 `http://www.example.com`

### 2. 导航控制

- **← 后退**：返回上一页（可能不可用）
- **→ 前进**：前进到下一页（可能不可用）
- **↻ 刷新**：重新加载当前页面

### 3. 关闭标签

1. 点击 **✕ 关闭标签** 按钮
2. 弹出确认对话框
3. 选择：
   - **关闭** - 关闭标签并停止 NCF
   - **取消** - 取消操作

---

## 🛠️ 故障排查

### WebView2 安装失败

**症状**：
- 显示"内置浏览器初始化失败"
- 区域一片黑或显示错误信息

**解决方案**：

#### 方案 1：使用外部浏览器（临时）
1. 点击 **🌍 在外部浏览器中打开** 按钮
2. 系统默认浏览器会打开 NCF

#### 方案 2：手动安装 WebView2
1. 点击 **⬇️ 下载 WebView2 Runtime** 按钮
2. 浏览器会打开下载页面
3. 下载并运行安装程序
4. 重启 NCF 桌面应用

#### 方案 3：命令行安装
在 PowerShell（管理员）中运行：
```powershell
$url = "https://go.microsoft.com/fwlink/p/?LinkId=2124703"
$output = "$env:TEMP\WebView2.exe"
Invoke-WebRequest -Uri $url -OutFile $output
Start-Process -FilePath $output -Wait
```

### 地址栏无法编辑

**症状**：
- 无法在地址栏输入文字

**解决方案**：
- 点击地址栏确保它获得焦点
- 检查是否有其他对话框在前台
- 重启应用

### 进程无法停止

**症状**：
- 关闭标签后，任务管理器中仍有 Senparc.Web 进程

**解决方案**：
- 本版本已修复此问题
- 使用 `taskkill /T /F` 强制终止整个进程树
- 如仍有问题，手动在任务管理器中结束进程

---

## 💡 使用技巧

### 1. 快速导航
- 使用 `Ctrl+L` 聚焦地址栏（如果支持）
- 直接输入 URL 后按 Enter

### 2. 防止误操作
- 关闭标签时会弹出确认对话框
- 仔细阅读提示信息

### 3. 外部浏览器
- 如内置浏览器有问题，随时可以使用外部浏览器
- 点击"在外部浏览器中打开"即可

### 4. 日志查看
- 在"设置"标签页可以查看详细日志
- 日志会显示 WebView2 检测和安装信息

---

## 📝 常见问题

### Q: 为什么首次启动很慢？
**A**: 首次启动需要下载并安装 WebView2 Runtime（约 2-5 分钟），后续启动会很快。

### Q: 可以跳过 WebView2 安装吗？
**A**: 可以点击"在外部浏览器中打开"使用系统浏览器，但内置浏览器功能将不可用。

### Q: WebView2 会自动更新吗？
**A**: 是的，WebView2 会通过 Microsoft Edge 更新通道自动更新，无需手动操作。

### Q: 如何卸载 WebView2？
**A**: 
1. 打开"设置" → "应用" → "应用和功能"
2. 搜索"Microsoft Edge WebView2 Runtime"
3. 点击"卸载"

### Q: 支持哪些操作系统？
**A**: 
- ✅ Windows 10/11 (x64, x86, ARM64)
- ✅ macOS (使用系统 WKWebView)
- ✅ Linux (使用 WebKitGTK)

---

## 🔗 相关资源

- [详细功能说明](./WEBVIEW2_AUTO_SETUP.md)
- [更新日志](./CHANGELOG_WEBVIEW.md)
- [WebView2 官方文档](https://learn.microsoft.com/microsoft-edge/webview2/)

---

## 📞 获取帮助

如果遇到问题：
1. 查看应用内日志
2. 查阅本文档
3. 查看 [详细功能说明](./WEBVIEW2_AUTO_SETUP.md)
4. 联系技术支持

---

**版本**: 1.1.0  
**最后更新**: 2025-11-14

