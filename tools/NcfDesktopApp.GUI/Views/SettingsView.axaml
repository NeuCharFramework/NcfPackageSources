<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:NcfDesktopApp.GUI.ViewModels"
             mc:Ignorable="d" d:DesignWidth="900" d:DesignHeight="600"
             x:Class="NcfDesktopApp.GUI.Views.SettingsView"
             x:DataType="vm:MainWindowViewModel">

    <Grid RowDefinitions="Auto,*">
        
        <!-- é¡¶éƒ¨æ“ä½œæ  -->
        <Border Grid.Row="0" 
                Background="{DynamicResource ToolbarBackgroundBrush}" 
                BorderBrush="{DynamicResource ToolbarBorderBrush}" 
                BorderThickness="0,0,0,1" 
                Padding="20,15">
            <Grid ColumnDefinitions="Auto,*,Auto">
                <!-- æ ‡é¢˜ -->
                <TextBlock Grid.Column="0" 
                           Text="âš™ï¸ NCF è®¾ç½®ä¸­å¿ƒ" 
                           FontSize="18" 
                           FontWeight="SemiBold" 
                           VerticalAlignment="Center"/>
                
                <!-- ä¸»è¦æ“ä½œæŒ‰é’® -->
                <StackPanel Grid.Column="2" 
                            Orientation="Horizontal" 
                            Spacing="10">
                    <Button Content="æµ‹è¯•è¿žæŽ¥" 
                            Command="{Binding TestConnectionCommand}" 
                            Padding="15,8"
                            Background="#28A745"
                            Foreground="White"
                            CornerRadius="4"
                            FontWeight="SemiBold"/>
                    <Button Content="æ‰“å¼€é…ç½®ç›®å½•" 
                            Command="{Binding OpenConfigDirectoryCommand}" 
                            Padding="15,8"
                            Background="#6C757D"
                            Foreground="White"
                            CornerRadius="4"
                            FontWeight="SemiBold"/>
                    <Button Content="{Binding MainButtonText}" 
                            Command="{Binding MainOperationCommand}" 
                            Padding="20,8"
                            Background="#007ACC"
                            Foreground="White"
                            CornerRadius="4"
                            FontWeight="SemiBold"
                            FontSize="14"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- ðŸ†• ä¸»è¦å†…å®¹åŒºåŸŸ - å·¦å³åˆ†æ å¸ƒå±€ -->
        <Grid Grid.Row="1" ColumnDefinitions="420,*">
            
            <!-- å·¦ä¾§ï¼šæŽ§åˆ¶é¢æ¿ -->
            <ScrollViewer Grid.Column="0" 
                         Padding="20,15,10,20"
                         VerticalScrollBarVisibility="Auto">

                <StackPanel Spacing="15">
                    
                    <!-- çŠ¶æ€ä¿¡æ¯å¡ç‰‡ -->
                    <Border Classes="card-compact">
                        <StackPanel Spacing="12">
                            <TextBlock Text="ðŸ“Š çŠ¶æ€ä¿¡æ¯" 
                                       FontSize="16" 
                                       FontWeight="SemiBold"/>
                            
                            <Grid RowDefinitions="Auto,Auto,Auto,Auto" 
                                  ColumnDefinitions="100,*">
                                
                                <TextBlock Grid.Row="0" Grid.Column="0" 
                                          Text="è¿è¡Œå¹³å°:" 
                                          FontWeight="SemiBold" 
                                          FontSize="12"
                                          Foreground="{DynamicResource SecondaryTextBrush}"
                                          Margin="0,0,0,8"/>
                                <TextBlock Grid.Row="0" Grid.Column="1" 
                                          Text="{Binding PlatformInfo}" 
                                          FontSize="12"
                                          Margin="0,0,0,8"/>
                                
                                <TextBlock Grid.Row="1" Grid.Column="0" 
                                          Text="æœ€æ–°ç‰ˆæœ¬:" 
                                          FontWeight="SemiBold" 
                                          FontSize="12"
                                          Foreground="{DynamicResource SecondaryTextBrush}"
                                          Margin="0,0,0,8"/>
                                <TextBlock Grid.Row="1" Grid.Column="1" 
                                          Text="{Binding LatestVersion}" 
                                          FontSize="12"
                                          Margin="0,0,0,8"/>
                                
                                <TextBlock Grid.Row="2" Grid.Column="0" 
                                          Text="å½“å‰çŠ¶æ€:" 
                                          FontWeight="SemiBold" 
                                          FontSize="12"
                                          Foreground="{DynamicResource SecondaryTextBrush}"
                                          Margin="0,0,0,8"/>
                                <StackPanel Grid.Row="2" Grid.Column="1" 
                                           Orientation="Horizontal" 
                                           Spacing="8" 
                                           Margin="0,0,0,8">
                                    <Border Background="{Binding StatusColor}" 
                                           CornerRadius="8" 
                                           Width="12" 
                                           Height="12"
                                           VerticalAlignment="Center"/>
                                    <TextBlock Text="{Binding CurrentStatus}" 
                                              FontSize="12"
                                              VerticalAlignment="Center"/>
                                </StackPanel>
                                
                                <TextBlock Grid.Row="3" Grid.Column="0" 
                                          Text="ç«™ç‚¹åœ°å€:" 
                                          FontWeight="SemiBold" 
                                          FontSize="12"
                                          Foreground="{DynamicResource SecondaryTextBrush}"/>
                                <TextBlock Grid.Row="3" Grid.Column="1" 
                                          Text="{Binding SiteUrl}" 
                                          FontFamily="Consolas" 
                                          FontSize="11"
                                          TextWrapping="Wrap"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- æ“ä½œè¿›åº¦å¡ç‰‡ -->
                    <Border Classes="card-compact">
                        <StackPanel Spacing="10">
                            <TextBlock Text="âš¡ æ“ä½œè¿›åº¦" 
                                       FontSize="16" 
                                       FontWeight="SemiBold"/>
                            
                            <TextBlock Text="{Binding ProgressText}" 
                                      FontWeight="SemiBold"
                                      FontSize="12"/>
                            <ProgressBar Value="{Binding ProgressValue}" 
                                         IsIndeterminate="{Binding IsProgressIndeterminate}" 
                                         Height="6" 
                                         CornerRadius="3"/>
                        </StackPanel>
                    </Border>

                    <!-- é…ç½®é€‰é¡¹å¡ç‰‡ -->
                    <Border Classes="card-compact">
                        <StackPanel Spacing="12">
                            <TextBlock Text="âš™ï¸ é…ç½®é€‰é¡¹" 
                                       FontSize="16" 
                                       FontWeight="SemiBold"/>
                            
                            <StackPanel Spacing="8">
                                <CheckBox Content="è‡ªåŠ¨åœ¨å†…ç½®æµè§ˆå™¨ä¸­æ‰“å¼€" 
                                         IsChecked="{Binding AutoOpenBrowser}"
                                         FontSize="12"/>
                                <CheckBox Content="è‡ªåŠ¨æ¸…ç†ä¸‹è½½æ–‡ä»¶" 
                                         IsChecked="{Binding AutoCleanDownloads}"
                                         FontSize="12"/>
                                <CheckBox Content="æ£€æŸ¥æ›´æ–°æ—¶æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯" 
                                         IsChecked="{Binding ShowDetailedInfo}"
                                         FontSize="12"/>
                                <CheckBox Content="æœ€å°åŒ–åˆ°ç³»ç»Ÿæ‰˜ç›˜" 
                                         IsChecked="{Binding MinimizeToTray}"
                                         FontSize="12"/>
                            </StackPanel>
                            
                            <Separator Margin="0,8"/>
                            
                            <StackPanel Spacing="8">
                                <TextBlock Text="ç«¯å£èŒƒå›´:" 
                                          FontWeight="SemiBold"
                                          FontSize="12"/>
                                <StackPanel Orientation="Horizontal" 
                                           Spacing="8" 
                                           VerticalAlignment="Center">
                                    <NumericUpDown Value="{Binding StartPort}" 
                                                  Minimum="1024" 
                                                  Maximum="65535" 
                                                  Width="140"
                                                  FontSize="12"/>
                                    <TextBlock Text="åˆ°" 
                                              VerticalAlignment="Center"
                                              FontSize="12"/>
                                    <NumericUpDown Value="{Binding EndPort}" 
                                                  Minimum="1024" 
                                                  Maximum="65535" 
                                                  Width="140"
                                                  FontSize="12"/>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                </StackPanel>
            </ScrollViewer>
            
            <!-- ðŸ†• å³ä¾§ï¼šæ—¥å¿—é¢æ¿ -->
            <Border Grid.Column="1" 
                    Classes="log-panel"
                    Margin="10,15,20,20">
                <Grid RowDefinitions="Auto,*">
                    <!-- æ—¥å¿—æ ‡é¢˜æ  -->
                    <Border Grid.Row="0" 
                            Background="{DynamicResource ToolbarBackgroundBrush}"
                            BorderBrush="{DynamicResource CardBorderBrush}"
                            BorderThickness="0,0,0,1"
                            Padding="15,10">
                        <TextBlock Text="ðŸ“ æ“ä½œæ—¥å¿—" 
                                  FontSize="16" 
                                  FontWeight="SemiBold"
                                  VerticalAlignment="Center"/>
                    </Border>
                    
                    <!-- æ—¥å¿—å†…å®¹åŒºåŸŸ -->
                    <Border Grid.Row="1"
                            Background="{DynamicResource LogBackgroundBrush}" 
                            BorderBrush="{DynamicResource CardBorderBrush}" 
                            BorderThickness="1"
                            CornerRadius="0,0,8,8">
                        <ScrollViewer Name="LogScrollViewer" 
                                     Padding="15,10"
                                     VerticalScrollBarVisibility="Auto"
                                     HorizontalScrollBarVisibility="Auto">
                            <TextBlock Text="{Binding LogText}" 
                                      FontFamily="Consolas,Menlo,Monaco,Courier New" 
                                      FontSize="11" 
                                      TextWrapping="Wrap" 
                                      Foreground="{DynamicResource InputTextBrush}"
                                      LineHeight="16"
                                      Background="Transparent"/>
                        </ScrollViewer>
                    </Border>
                </Grid>
            </Border>
            
        </Grid>
    </Grid>

    <UserControl.Styles>
        <!-- ç´§å‡‘å¡ç‰‡æ ·å¼ -->
        <Style Selector="Border.card-compact">
            <Setter Property="Background" Value="{DynamicResource CardBackgroundBrush}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource CardBorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="15"/>
            <Setter Property="BoxShadow" Value="0 1 3 0 #0D000000"/>
        </Style>
        
        <!-- æ—¥å¿—é¢æ¿æ ·å¼ -->
        <Style Selector="Border.log-panel">
            <Setter Property="Background" Value="{DynamicResource CardBackgroundBrush}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource CardBorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="BoxShadow" Value="0 2 8 0 #14000000"/>
        </Style>
        
        <Style Selector="Button">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        
        <Style Selector="Button:pointerover">
            <Setter Property="Opacity" Value="0.9"/>
        </Style>
        
        <!-- CheckBox æ ·å¼ä¼˜åŒ– -->
        <Style Selector="CheckBox">
            <Setter Property="MinHeight" Value="28"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        
        <!-- æ»šåŠ¨æ¡æ ·å¼ä¼˜åŒ– -->
        <Style Selector="ScrollViewer">
            <Setter Property="AllowAutoHide" Value="True"/>
        </Style>
    </UserControl.Styles>
</UserControl> 